//Player.h
#pragma once      
#include <string> 
using namespace std;

class Player 
{
public: 
    Player(); 
    Player(string nickname); 

    virtual void attack() = 0; 
    void printPlayerStatus(); 

    // getter 함수
    string getJobName();
    string getNickname();
    int getLevel();
    int getHP();
    int getMP();
    int getPower();
    int getDefence();
    int getAccuracy();
    int getSpeed();

    // setter 함수
    void setNickname(string nickname);
    bool setHP(int HP);
    bool setMP(int MP);
    void setPower(int power);
    void setDefence(int defence);
    void setAccuracy(int accuracy);
    void setSpeed(int speed);

protected:
    string job_name;
    string nickname;
    int level;
    int HP;
    int MP;
    int power;
    int defence;
    int accuracy;
    int speed;
};

//Warrior.h
#pragma once
#include "Player.h"

class Warrior : public Player
{
public:
    Warrior(string nickname);
    void attack() override;
};

//Magician.h
#pragma once
#include "Player.h"

class Magician : public Player
{
public:
    Magician(string nickname);
    void attack() override;
};

//Archer.h
#pragma once
#include "Player.h"

class Archer : public Player
{
public:
    Archer(string nickname);
    void attack() override;
};

//Thief.h
#pragma once
#include "Player.h"

class Thief : public Player
{
public:
    Thief(string nickname);
    void attack() override;
};

//Player.cpp
#include "Player.h"
#include <iostream>

Player::Player() 
{
    job_name = "Beginner";
    nickname = "Player";
    level = 1;
    HP = 100;
    MP = 100;
    power = 5;
    defence = 5;
    accuracy = 5;
    speed = 5;
}
Player::Player(string nickname) 
{
    this->job_name = "Beginner";
    this->nickname = nickname;
    this->level = 1;
    this->HP = 100;
    this->MP = 100;
    this->power = 5;
    this->defence = 5;
    this->accuracy = 5;
    this->speed = 5;
}
void Player::printPlayerStatus() 
{
    cout << "------------------------------------" << endl;
    cout << "* 현재 능력치" << endl;
    cout << "닉네임: " << nickname << endl;
    cout << "직업: " << job_name << endl;
    cout << "Lv. " << level << endl;
    cout << "HP: " << HP << endl;
    cout << "MP: " << MP << endl;
    cout << "공격력: " << power << endl;
    cout << "방어력: " << defence << endl;
    cout << "정확도: " << accuracy << endl;
    cout << "속도: " << speed << endl;
    cout << "------------------------------------" << endl;
}

string Player::getJobName()
{
    return job_name;
}

string Player::getNickname()
{
    return nickname;
}

int Player::getLevel()
{
    return level;
}

int Player::getHP()
{
    return HP;
}

int Player::getMP()
{
    return MP;
}

int Player::getPower()
{
    return power;
}

int Player::getDefence()
{
    return defence;
}

int Player::getAccuracy()
{
    return accuracy;
}

int Player::getSpeed()
{
    return speed;
}

void Player::setNickname(string nickname)
{
    this->nickname = nickname;
}

bool Player::setHP(int HP)
{
    this->HP = HP;
    return this->HP >= 1 ? true : false;
}

bool Player::setMP(int MP)
{
    this->MP = MP;
    return this->MP >= 1 ? true : false;
}

void Player::setPower(int power)
{
    this->power = power;
}

void Player::setDefence(int defence)
{
    this->defence = defence;
}

void Player::setAccuracy(int accuracy)
{
    this->accuracy = accuracy;
}

void Player::setSpeed(int speed)
{
    this->speed = speed;
}

//Warrior.cpp
#include "Warrior.h"
#include <iostream>
using namespace std;

Warrior::Warrior(string nickname) : Player(nickname)
{
    job_name = "전사";
    cout << "* 전사로 전직하였습니다." << endl;
    HP = 80;
}

void Warrior::attack() 
{
    cout << "* 장검을 휘두른다 " << endl;
}

// Magician.cpp
#include "Magician.h"
#include <iostream>
using namespace std;

Magician::Magician(string nickname) : Player(nickname)
{
    job_name = "법사";
    cout << "* 법사로 전직하였습니다." << endl;
    HP = 80;
}

void Magician::attack()
{
    cout << "* 매직볼을 쏜다 " << endl;
}

// Archer.cpp
#include "Archer.h" //궁사 클래스의 헤더파일을 사용한다 
#include <iostream> //입출력 cout cin 이런거 사용하기 위해서 함
using namespace std; 

Archer::Archer(string nickname) : Player(nickname) // Archr(궁사) 클래스 생성
{
    job_name = "궁사";
    cout << "* 궁사로 전직하였습니다." << endl;
    HP = 80;
}

void Archer::attack()
{
    cout << "* 활을 쏜다" << endl;
}

//Thief.cpp
#include "Thief.h"
#include <iostream>
using namespace std;

Thief::Thief(string nickname) : Player(nickname)
{
    job_name = "도적";
    cout << "* 도적으로 전직하였습니다." << endl;
    HP = 80;
}

void Thief::attack()
{
    cout << "* 아대를 휘두른다 " << endl;
}

//Main.cpp
#include <iostream>
#include "player.h"
#include "warrior.h"
#include "magician.h"
#include "thief.h"
#include "archer.h"
using namespace std;

// 메인 함수
int main() {
    string jobs[] = { "전사", "마법사", "도적", "궁수" };
    int job_choice = 0;
    string nickname;

    Player* player[4];

    cout << "* 닉네임을 입력해주세요: ";
    cin >> nickname;

    cout << "<전직 시스템>" << endl;
    cout << nickname << "님, 환영합니다!" << endl;
    cout << "* 원하시는 직업을 선택해주세요." << endl;

    for (int i = 0; i < 4; i++) {
        cout << (i + 1) << ". " << jobs[i] << endl;
    }

    cout << "선택: ";
    cin >> job_choice;

    switch (job_choice) 
    {
    case 1:
        player[job_choice-1] = new Warrior(nickname);
        break;
    case 2:
        player[job_choice-1] = new Magician(nickname);
        break;
    case 3:
        player[job_choice-1] = new Thief(nickname);
        break;
    case 4:
        player[job_choice-1] = new Archer(nickname);
        break;
    default:
        cout << "잘못된 입력입니다." << endl;
        return 1;
    }

    player[job_choice-1]->attack();
    player[job_choice-1]->printPlayerStatus();

    delete player[job_choice-1];

    return 0;
}
